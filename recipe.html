<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>鶏胸肉のサラダチキン 調味料・栄養計算</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
            line-height: 1.6;
            background-color: #f9f9f9;
            color: #333;
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
        }
        h2 {
            text-align: center;
            color: #d9534f;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }
        
        /* 入力エリア */
        .input-area {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        label {
            font-weight: bold;
            font-size: 1.1em;
            color: #555;
        }
        input[type="number"] {
            width: 100%;
            padding: 12px;
            font-size: 1.2em;
            border: 1px solid #ccc;
            border-radius: 6px;
            box-sizing: border-box;
        }
        input[type=number]::-webkit-inner-spin-button,
        input[type=number]::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        button {
            width: 100%;
            padding: 12px;
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
            background-color: #d9534f;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #c9302c;
        }

        /* 計算結果エリア */
        #results {
            margin-top: 25px;
        }
        .result-section {
            margin-bottom: 20px;
            background-color: #fff;
            border-radius: 6px;
            border: 1px solid #eee;
            overflow: hidden;
        }
        .result-section h3 {
            margin: 0;
            padding: 15px 20px;
            background-color: #f7f7f7;
            border-bottom: 1px solid #eee;
        }
        .result-section ul {
            list-style-type: none;
            padding: 0 20px 20px 20px;
            margin: 0;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px dotted #e0e0e0;
        }
        .result-item:last-child {
            border-bottom: none;
        }
        .result-item .label {
            font-weight: bold;
            font-size: 1.1em;
        }
        .result-item .amount {
            font-size: 1.1em;
            color: #d9534f;
            font-weight: bold;
        }
        
        /* 栄養素結果のスタイル */
        .nutrition-total {
            background-color: #fdfdfd;
            padding-top: 15px;
            border-top: 2px solid #f0f0f0;
        }
        .nutrition-total .result-item {
            border-top: 1px dotted #e0e0e0;
            border-bottom: none;
            padding-top: 15px;
        }
        .nutrition-total .result-item .label {
            color: #d9534f;
        }

        /* 注意書き */
        .notice {
            font-size: 0.9em;
            color: #666;
            background-color: #fff8e1;
            border: 1px solid #ffe596;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
        }
        
        /* エラーメッセージ */
        #error {
            color: red;
            font-weight: bold;
            text-align: center;
            margin-top: 10px;
            display: none;
        }

        /* 基準レシピ */
        .base-recipe {
            margin-top: 20px;
            font-size: 0.9em;
            color: #777;
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 6px;
        }

    </style>
</head>
<body>

    <h2>鶏胸肉のサラダチキン 調味料・栄養計算</h2>

    <div class="input-area">
        <label for="chickenWeight">鶏胸肉の量 (g)</label>
        <input type="number" id="chickenWeight" placeholder="例: 300" min="0">
        
        <button id="calculateBtn">計算する</button>

        <div id="error">有効な数値を入力してください。</div>
    </div>

    <div id="results"></div>

    <div class="base-recipe">
        <p style="margin: 0 0 10px 0; font-weight: bold;">計算の基準 (すべてgに換算):</p>
        <ul style="margin: 0; padding-left: 20px;">
            <li>鶏胸肉: 300g</li>
            <li>塩 (小さじ1): 6g</li>
            <li>砂糖 (小さじ2): 6g</li>
            <li>鶏ガラスープの素 (小さじ0.5): 1.25g</li>
            <li>味の素 (8振り): 0.8g</li>
            <li>水: 200g</li>
        </ul>
    </div>


    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // 1. 要素を取得
            const chickenInput = document.getElementById('chickenWeight');
            const calculateButton = document.getElementById('calculateBtn');
            const resultsDiv = document.getElementById('results');
            const errorDiv = document.getElementById('error');

            // 2. 基準レシピの定義
            const BASE_CHICKEN = 300;
            const BASE_SALT = 6;
            const BASE_SUGAR = 6;
            const BASE_STOCK = 1.25;
            const BASE_AJINOMOTO = 0.8;
            const BASE_WATER = 200;

            // 鶏胸肉1gあたりの各調味料の比率
            const SALT_RATIO = BASE_SALT / BASE_CHICKEN;
            const SUGAR_RATIO = BASE_SUGAR / BASE_CHICKEN;
            const STOCK_RATIO = BASE_STOCK / BASE_CHICKEN;
            const AJINOMOTO_RATIO = BASE_AJINOMOTO / BASE_CHICKEN;
            const WATER_RATIO = BASE_WATER / BASE_CHICKEN;

            // 3. 栄養素データベース (1gあたり)
            // (P: たんぱく質, F: 脂質, C: 炭水化物, Cal: カロリー, Salt: 食塩相当量)
            const NUTRITION_DATA = {
                // 鶏胸肉 (皮なし、生) 1gあたり (100g換算)
                chicken: { 
                    cal: 1.05,  // 105kcal
                    p: 0.233, // 23.3g
                    f: 0.015, // 1.5g
                    c: 0.001, // 0.1g
                    salt: 0.001 // 0.1g
                },
                // 塩
                salt: { cal: 0, p: 0, f: 0, c: 0, salt: 1.0 },
                // 砂糖 (上白糖)
                sugar: { cal: 3.91, p: 0, f: 0, c: 0.993, salt: 0 },
                // 鶏ガラスープの素 (顆粒)
                stock: { 
                    cal: 2.19,  // 219kcal/100g
                    p: 0.074, // 7.4g/100g
                    f: 0.01,  // 1.0g/100g
                    c: 0.451, // 45.1g/100g
                    salt: 0.427 // 42.7g/100g
                },
                // 味の素 (うま味調味料)
                ajinomoto: { 
                    cal: 2.8,   // 2.8kcal/1g (Q&Aより)
                    p: 0.47,  // (一般的なデータ)
                    f: 0,
                    c: 0.23,  // (一般的なデータ)
                    salt: 0.3    // 0.3g/1g (Q&Aより)
                },
                // 水
                water: { cal: 0, p: 0, f: 0, c: 0, salt: 0 }
            };

            // 4. ★★★ 吸収率の仮定 ★★★
            // 調味液の栄養素（水分を除く）のうち、何%が肉に吸収されるかの仮定値
            // (例: 0.15 = 15%)
            const ABSORPTION_RATE = 0.15;


            // 5. 栄養素計算用のヘルパー関数
            function calculateNutrition(grams, type) {
                const data = NUTRITION_DATA[type];
                return {
                    cal: grams * data.cal,
                    p: grams * data.p,
                    f: grams * data.f,
                    c: grams * data.c,
                    salt: grams * data.salt
                };
            }

            // 6. ボタンクリック時の処理
            calculateButton.addEventListener('click', () => {
                const inputWeight = parseFloat(chickenInput.value);

                if (isNaN(inputWeight) || inputWeight <= 0) {
                    errorDiv.style.display = 'block';
                    resultsDiv.innerHTML = '';
                    return;
                }
                
                errorDiv.style.display = 'none';

                // 7. 各調味料の重量を計算
                const saltAmount = inputWeight * SALT_RATIO;
                const sugarAmount = inputWeight * SUGAR_RATIO;
                const stockAmount = inputWeight * STOCK_RATIO;
                const ajinomotoAmount = inputWeight * AJINOMOTO_RATIO;
                const waterAmount = inputWeight * WATER_RATIO;

                // 8. 栄養素の計算
                
                // (A) 鶏胸肉 (生) の初期栄養素
                const chickenNutrition = calculateNutrition(inputWeight, 'chicken');
                
                // (B) 調味液 (水を除く) の総栄養素
                const saltNutrition = calculateNutrition(saltAmount, 'salt');
                const sugarNutrition = calculateNutrition(sugarAmount, 'sugar');
                const stockNutrition = calculateNutrition(stockAmount, 'stock');
                const ajinomotoNutrition = calculateNutrition(ajinomotoAmount, 'ajinomoto');

                const marinadeNutrition = {
                    cal: saltNutrition.cal + sugarNutrition.cal + stockNutrition.cal + ajinomotoNutrition.cal,
                    p: saltNutrition.p + sugarNutrition.p + stockNutrition.p + ajinomotoNutrition.p,
                    f: saltNutrition.f + sugarNutrition.f + stockNutrition.f + ajinomotoNutrition.f,
                    c: saltNutrition.c + sugarNutrition.c + stockNutrition.c + ajinomotoNutrition.c,
                    salt: saltNutrition.salt + sugarNutrition.salt + stockNutrition.salt + ajinomotoNutrition.salt
                };

                // (C) 肉に吸収されると推定される栄養素 (調味液 * 吸収率)
                const absorbedNutrition = {
                    cal: marinadeNutrition.cal * ABSORPTION_RATE,
                    p: marinadeNutrition.p * ABSORPTION_RATE,
                    f: marinadeNutrition.f * ABSORPTION_RATE,
                    c: marinadeNutrition.c * ABSORPTION_RATE,
                    salt: marinadeNutrition.salt * ABSORPTION_RATE
                };

                // (D) 最終的な鶏胸肉の推定栄養素 (A + C)
                const finalNutrition = {
                    cal: chickenNutrition.cal + absorbedNutrition.cal,
                    p: chickenNutrition.p + absorbedNutrition.p,
                    f: chickenNutrition.f + absorbedNutrition.f,
                    c: chickenNutrition.c + absorbedNutrition.c,
                    salt: chickenNutrition.salt + absorbedNutrition.salt
                };


                // 9. 結果をHTMLとして整形して表示
                
                // 小数点以下2桁にフォーマットする関数
                const format = (num) => num.toFixed(2);

                resultsDiv.innerHTML = `
                    <div class="result-section">
                        <h3>鶏胸肉 ${inputWeight}g の場合の調味料</h3>
                        <ul>
                            <li class="result-item">
                                <span class="label">塩</span>
                                <span class="amount">${format(saltAmount)} g</span>
                            </li>
                            <li class="result-item">
                                <span class="label">砂糖</span>
                                <span class="amount">${format(sugarAmount)} g</span>
                            </li>
                            <li class="result-item">
                                <span class="label">鶏ガラスープの素</span>
                                <span class="amount">${format(stockAmount)} g</span>
                            </li>
                            <li class="result-item">
                                <span class="label">味の素</span>
                                <span class="amount">${format(ajinomotoAmount)} g</span>
                            </li>
                            <li class="result-item">
                                <span class="label">水</span>
                                <span class="amount">${format(waterAmount)} g</span>
                            </li>
                        </ul>
                    </div>

                    <div class="result-section">
                        <h3>調理後の推定栄養素 (全体)</h3>

                        <div class="notice">
                            <strong>＜重要＞</strong><br>
                            この栄養素は、調味液（水を除く）の全栄養素のうち <strong>${ABSORPTION_RATE * 100}%</strong> が肉に吸収されると<strong>仮定した推定値</strong>です。調理による水分減少などは考慮しておらず、実際の値とは異なります。
                        </div>

                        <ul>
                            <li class="result-item">
                                <span class="label">カロリー</span>
                                <span class="amount">${format(finalNutrition.cal)} kcal</span>
                            </li>
                            <li class="result-item">
                                <span class="label">たんぱく質 (P)</span>
                                <span class="amount">${format(finalNutrition.p)} g</span>
                            </li>
                            <li class="result-item">
                                <span class="label">脂質 (F)</span>
                                <span class="amount">${format(finalNutrition.f)} g</span>
                            </li>
                            <li class="result-item">
                                <span class="label">炭水化物 (C)</span>
                                <span class="amount">${format(finalNutrition.c)} g</span>
                            </li>
                        </ul>
                        <div class="nutrition-total">
                            <ul>
                                <li class="result-item">
                                    <span class="label">推定 食塩相当量</span>
                                    <span class="amount">${format(finalNutrition.salt)} g</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                `;
            });
            
            // Enterキーでも計算
            chickenInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    calculateButton.click();
                }
            });
        });
    </script>

</body>
</html>